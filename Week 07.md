# <WEEK 07. Chroma keying & Dispill>

## Chroma key

1. 크로마키란?

![crewcallsupret-1204x630](https://user-images.githubusercontent.com/112792903/208255515-b65c6b5b-d0a5-464d-b9f3-ccb566e79611.jpg)

영상에서 가장 많이 사용되는 시각 효과 기술 중 하나이다. 영상 촬영 시 배경이 되는 그린, 블루 스크린 또는 화면 합성 기술로 불린다.
합성할 인물을 단색 판을 배경으로 촬영한 뒤, 그 화면에서 배경색을 제거해 거기에 다른 영상을 집어넣는 것이다.
초록색과 파란색을 쓰는 이유는 우리 피부색과 보색 관계이기 때문이다. 피부에 초록색이나 청색 비중이 적다고 생각하면 되는 것. 
노란색과 빨간색은 잘 쓰지 않는데, 피부에 있는 붉은기와 노란기 때문에 영상을 합성하는 과정에서 문제가 생길 수 있기 때문이다. 
붉은색 크로마키 스크린을 두고 붉은색을 뺀 뒤 영상을 합성하면, 피부가 투명해지거나 얼룩이 생길 수 있다.

2. 크로마키를 사용할 시 주의할 점

-배경색과 비슷한 색의 옷을 입으면 옷에 구멍이 뚫려 다른 배경과 합성이 될 수 있다.

-조명을 잘 배치하는 것이 중요하다. 그림자 때문에 부분마다 밝기 차이가 생기면, 크로마키를 할 때 그림자 부분에 얼룩이 생길 수 있다. 
조명을 설치할 땐 인물이 잘 나오는 것과 더불어, 스크린에 어두운 부분이 없도록 조명의 위치를 조정해야 한다. 
스크린에 딱 붙어서 찍는 것보단 거리를 두는 게 좋다. 스크린에 피사체 그림자가 진하게 나오기 때문이다.
또한, 스크린의 초록색이 피사체에 반사되면서 크로마키를 할 때 얼굴 색도 같이 빠져 어색하게 보일 수 있다.


## Keyers

![large_Keying_Tips_in_Nuke_PT_1_2](https://user-images.githubusercontent.com/112792903/208255557-854b66af-5be2-4603-bb32-3161fb458898.jpg)

(Utility)

1. Keyer : 여러 개의 키 노드를 제공. 
2. Hue Keyer : RGB 채널에서 색상을 계산하여 알파 채널에 매트를 생성.
3. Difference : 두 이미지 사이의 차이를 매트로 생성.

(Screen)

4. Keylight : 화면 색상 선택기를 사용하여 소스 입력에서 파란색/녹색 화면 색상으로 사용할 색상을 선택하여 키를 결정한다.              
5. Ultimate : 머리카락, 연기 및 모션 블러 에지와 같은 미세한 디테일을 보존해주는 합성물.
6. Primatte : 파란색 또는 녹색 화면 이미지에서 단일 픽셀 또는 픽셀 범위를 샘플링하여 생성.
              Primatte를 사용하려면 자동 계산을 클릭하여 배경 화면 색상을 자동으로 감지하고 제거하며 전경 및 배경 노이즈도 일부 제거한다. 
              또는 색상 샘플을 사용하는 방법으로 작업을 설정하거나 왼쪽 및 오른쪽 화살표 버튼을 사용한다.
7. IBKGIZMO : [IBK Gizmo , IBK colour] 2개의 노드는 항상 같이 사용하는 패키지 개념. IBK colour에서 patch black 수치만 올려서, 손쉽게 클린플레이트를 만들 수 있다.
              IBK Gizmo node 거의 옵션을 건들지 않음. 매트 촬영시 소프트 헤어 처리할 수 있음.
8. Chroma Keyer

## Soft Key, Hard Key + Key Mix

Soft Keyer을 이용해서 머리카락과 같은 디테일한 요구를 필요할 때 유용하게 된다. 
Hard Keyer

우선 Keylight 노드를 불러옴 -> 소프트 매트는 컬러 휠을 열어 그린 수치만 1로 올려 일정하게 수치값이 올라감. A키를 누르면 반 투명 상태가 된다.
-> 오염된 영역을 측정하기 위해 감마 슬라이드를 내려보면 얼룩이 쉽게 보임. -> Hard Matte 영역으로 수정. Keylight를 한 개 더 연결.
-> 기존과 같은 방식으로 그린에 해당되는 영역을 추출.->가장 많이 블랙이 되는 지점에 클릭. ->스크린 Gain을 올려 블랙에 가깝도록 적정하게 투명영역을 맞춰줌.
-> Clip White의 수치값을 내려 완전히 하얗게 되는 지점에서 멈춰줌. -> Chammel Merge를 이용하여 매트를 합쳐줌 (Key Mix). -> 1차적으로 끝남
-> Channel > Copy 노드를 활용하여 오리지널 푸티지에서 알파를 복사. -> Keyer > AddMix는 자체 내부에서 Premult를 함. -> Despill Madness를 다운 받아
Despill 작업을 쉽게 할 수 있음. -> Grade 노드를 활용하여 배경 영역의 색상을 알맞게 조정. -> 그러나 아직까지 얼룩이 생긴부분은 촬영본이 원래 그렇게 찍혔기
때문에 직접 제거해주어야 함. -> Roto를 활용하여 얼룩 제거하기 -> Merge로 합치기.


